

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Nodes and Carriage Mechanisms &mdash; EBU-TT-Live Toolkit 2.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="EBU-TT-Live Toolkit 2.1 documentation" href="index.html"/>
        <link rel="up" title="Overview of the EBU-TT live toolkit." href="overview.html"/>
        <link rel="next" title="Filesystem Carriage Mechanism" href="filesystem_carriage_mechanism.html"/>
        <link rel="prev" title="Overview of the EBU-TT live toolkit." href="overview.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> EBU-TT-Live Toolkit
          

          
          </a>

          
            
            
              <div class="version">
                2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">Overview of the EBU-TT live toolkit.</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Nodes and Carriage Mechanisms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#processing-nodes">Processing Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#carriage-mechanisms">Carriage mechanisms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="filesystem_carriage_mechanism.html">Filesystem Carriage Mechanism</a></li>
<li class="toctree-l4"><a class="reference internal" href="websocket_carriage_mechanism.html">WebSocket Carriage Mechanism</a></li>
<li class="toctree-l4"><a class="reference internal" href="direct_carriage_mechanism.html">Direct Carriage Mechanism</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scripts_and_their_functions.html">Scripts and their functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="configurator.html">Configuration files and <code class="docutils literal"><span class="pre">ebu-run</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">Document and sequence validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_input_producer.html">User input producer</a></li>
<li class="toctree-l2"><a class="reference internal" href="timing_resolution.html">Timing resolution and consumer logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="segmentation.html">Segmentation of EBU-TT-Live document sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="conversion.html">Conversion of EBU-TT-Live documents to EBU-TT-D documents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ebu_tt_live.html">Source code reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EBU-TT-Live Toolkit</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="overview.html">Overview of the EBU-TT live toolkit.</a> &raquo;</li>
        
      <li>Nodes and Carriage Mechanisms</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/nodes_and_carriage_mechanisms.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nodes-and-carriage-mechanisms">
<h1>Nodes and Carriage Mechanisms<a class="headerlink" href="#nodes-and-carriage-mechanisms" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>The following piece should present the decisions behind the Node architecture and the carriage mechanism pluggability.</p>
<div class="figure" id="id1">
<p class="plantuml">
<img src="_images/plantuml-392f12d57982440a8e16b9cff16a840bae35def4.png" alt="&#64;startuml

package &quot;Processing Nodes&quot; {
[Consumer Nodes]
[Synthesizer Nodes]
[Producer Nodes]
[Producer Nodes] -- IProducerNode
[Synthesizer Nodes] -- IProducerNode
[Synthesizer Nodes] -- IConsumerNode
[Consumer Nodes] -- IConsumerNode
IProducerNode -- INode
IConsumerNode -- INode
}

package &quot;Carriage Mechanisms&quot; {
[Producer Nodes] -&gt; IProducerCarriage : emit_data
[Websocket] - IProducerCarriage
[Websocket] ..&gt; HTTP :use
IConsumerCarriage - [Websocket]
[Websocket] -up-&gt; INode : process_document
[Synthesizer Nodes] -&gt; IProducerCarriage : emit_data

note bottom of [Websocket]
  Carriage mechanisms may
  or may not work
  both directions.
end note

}

note top of [Producer Nodes]
  Producers produce only
end note

note top of [Synthesizer Nodes]
  Synthesizers produce
  and consume as well.
end note

note top of [Consumer Nodes]
  Consumers consume only
end note
&#64;enduml

" />
</p>
<p class="caption"><span class="caption-text">Processing node and Carriage mechanism components</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div></blockquote>
<div class="section" id="processing-nodes">
<h2>Processing Nodes<a class="headerlink" href="#processing-nodes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The processing nodes are the key components of this package and facilitate several different use-cases laid out
in the Node conformance section of the specification (EBU Tech3370). A node can be a producer or a consumer or both. This requirement
is fulfilled by the class structure depicted below.</p>
<div class="figure" id="id2">
<p class="plantuml">
<img src="_images/plantuml-5e3be0b7666a140dd29150339d37e31bc047ea75.png" alt="&#64;startuml

interface INode {
  ..methods..
  +{abstract} process_document()
}
interface IConsumerNode {
  ..properties..
  +{abstract} consumer_carriage
  ..classmethods..
  +expects()
  ..methods..
  +{abstract}register_consumer_carriage()
}
interface IProducerNode {
  ..properties..
  +{abstract} producer_carriage
  ..classmethods..
  +provides()
  ..methods..
  +{abstract}register_producer_carriage()
}

abstract class __AbstractNode {
  -_node_id : String
  ..properties..
  +node_id
  ..methods..
  __repr__()
}
abstract class AbstractConsumerNode {
  -_consumer_carriage
  ..properties..
  +consumer_carriage
  ..methods..
  +register_consumer_carriage()
}
abstract class AbstractProducerNode {
  -_producer_carriage
  ..properties..
  +producer_carriage
  ..methods..
  +register_producer_carriage()
}
abstract class AbstractCombinedNode {
}

class SimpleProducer {
  -_input_blocks : List&lt;String&gt;
  -_document_sequence : EBUTT3DocumentSequence
  -_reference_clock : Clock
  ..properties..
  +document_sequence
  +reference_clock
  ..methods..
  +process_document()
}

class SimpleConsumer {
  -_reference_clock : Clock
  -_sequence : EBUTT3DocumentSequence
  ..properties..
  +reference_clock
  ..methods..
  +process_document()
}

class BufferDelayNode {
  ..methods..
  +process_document()
}

class RetimingDelayNode{
  ..methods..
  +process_document()
}

class EBUTTDEncoder {
  ..methods..
  +process_document()
}

class DistributingNode {
  ..methods..
  +process_document()
}

class ReSequencer {
  ..methods..
  +process_document()
  +get_segment()
  +get_next_segment()
}

class HandoverNode {
  ..methods..
  +process_document()
}

INode &lt;|-- __AbstractNode
__AbstractNode &lt;|-- AbstractConsumerNode
IConsumerNode &lt;|-- AbstractConsumerNode
__AbstractNode &lt;|-- AbstractProducerNode
IProducerNode &lt;|-- AbstractProducerNode
AbstractConsumerNode &lt;|-- AbstractCombinedNode
AbstractProducerNode &lt;|-- AbstractCombinedNode

AbstractProducerNode &lt;|-- SimpleProducer
AbstractProducerNode &lt;|-- ReSequencer
AbstractConsumerNode &lt;|-- SimpleConsumer
AbstractCombinedNode &lt;|-- EBUTTDEncoder
AbstractCombinedNode &lt;|-- BufferDelayNode
AbstractCombinedNode &lt;|-- RetimingDelayNode
AbstractCombinedNode &lt;|-- DistributingNode
AbstractCombinedNode &lt;|-- HandoverNode
SimpleConsumer &lt;|-- ReSequencer

&#64;enduml
" />
</p>
<p class="caption"><span class="caption-text">Processing node classes</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div></blockquote>
</div>
<div class="section" id="carriage-mechanisms">
<h2>Carriage mechanisms<a class="headerlink" href="#carriage-mechanisms" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The carriage mechanisms are divided into 2 distinct kinds: producer and consumer carriages (not to be confused with producer and consumer nodes).</p>
<p>Producer carriages serve the purpose of sending/serialising a document once a processing node
has finished processing them and push them via their domain forward.</p>
<p>Consumers carriages on the other hand receive a (probably serialised) document from their own domain and
their job is to make sure the document is picked up (possibly parsed and validated) and given
to the consumer processing node that the carriage mechanism object is registered to.</p>
<p>The class hierarchy providing the necessary steps looks the following way:</p>
<div class="figure" id="id3">
<p class="plantuml">
<img src="_images/plantuml-5d36e3869b49fb024ae8ece9cbb290b1a369c69b.png" alt="&#64;startuml

interface ICarriageMechanism
interface IConsumerCarriage {
  .. properties ..
  +{abstract} consumer_node
  .. classmethods ..
  +provides()
  .. methods ..
  +{abstract} on_new_data()
  +{abstract} register_consumer_node()
}
interface IProducerCarriage {
  .. properties ..
  +{abstract} producer_node
  .. classmethods ..
  +expects()
  .. methods ..
  +{abstract} emit_data()
  +{abstract} register_producer_node()
}

abstract AbstractConsumerCarriage {
  .. properties ..
  +consumer_node
  .. methods ..
  +register_consumer_node()
}
abstract AbstractProducerCarriage {
  .. properties ..
  +producer_node
  .. methods ..
  +register_producer_node()
}
abstract AbstractCombinedCarriage

class WebsocketConsumerCarriage {
  -_provides : String
  .. methods ..
  +on_new_data()
}
class WebsocketProducerCarriage {
  -_expects : String
  .. methods ..
  +emit_data()
}
class FilesystemConsumerImpl {
  -_provides : String
  .. methods ..
  +on_new_data()
}
class FilesystemProducerImpl {
  -_expects : String
  .. methods ..
  +emit_data()
}
class SimpleFolderExport {
  -_expects : String
  .. methods ..
  +emit_data()
}
class RotatingFolderExport{
  .. methods ..
  +emit_data()
}

class DirectCarriageImpl {
  -_expects : Any
  -_provides : Any
  .. methods ..
  +emit_data()
  +on_new_data()
}


ICarriageMechanism &lt;|-- IProducerCarriage
ICarriageMechanism &lt;|-- IConsumerCarriage

IProducerCarriage &lt;|-- AbstractProducerCarriage
IConsumerCarriage &lt;|-- AbstractConsumerCarriage
AbstractProducerCarriage &lt;|-- AbstractCombinedCarriage
AbstractConsumerCarriage &lt;|-- AbstractCombinedCarriage

AbstractConsumerCarriage &lt;|-- WebsocketConsumerCarriage
AbstractProducerCarriage &lt;|-- WebsocketProducerCarriage

AbstractConsumerCarriage &lt;|-- FilesystemConsumerImpl
AbstractProducerCarriage &lt;|-- FilesystemProducerImpl

AbstractCombinedCarriage &lt;|-- DirectCarriageImpl

AbstractProducerCarriage &lt;|-- SimpleFolderExport
SimpleFolderExport &lt;|-- RotatingFolderExport

&#64;enduml" />
</p>
<p class="caption"><span class="caption-text">Carriage mechanism classes</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="filesystem_carriage_mechanism.html">Filesystem Carriage Mechanism</a></li>
<li class="toctree-l1"><a class="reference internal" href="websocket_carriage_mechanism.html">WebSocket Carriage Mechanism</a><ul>
<li class="toctree-l2"><a class="reference internal" href="websocket_carriage_mechanism.html#error-handling">Error handling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="direct_carriage_mechanism.html">Direct Carriage Mechanism</a></li>
</ul>
</div>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="filesystem_carriage_mechanism.html" class="btn btn-neutral float-right" title="Filesystem Carriage Mechanism" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Overview of the EBU-TT live toolkit." accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, European Broadcasting Union.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>